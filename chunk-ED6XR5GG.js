import{f as T,g as C,i as w,k as I}from"./chunk-YQITL2K6.js";import{Da as g,Ia as m,Va as y,Wa as S,Xa as p,Y as f,Ya as e,Z as k,Za as t,_a as b,a as u,bb as O,eb as r,fb as d,lb as n,mb as h,nb as x,ta as s,ub as E,vb as F,za as v}from"./chunk-R2RMLZGX.js";function V(c,i){if(c&1&&(e(0,"div",14),n(1),t()),c&2){let o=d();s(),x("= ",o.result)}}function $(c,i){if(c&1&&(e(0,"li"),n(1),t()),c&2){let o=i.$implicit;s(),h(o)}}function D(c,i){if(c&1&&(e(0,"div",15)(1,"h3"),n(2,"\u0418\u0441\u0442\u043E\u0440\u0438\u044F"),t(),e(3,"ul"),m(4,$,2,1,"li",16),t()()),c&2){let o=d();s(4),p("ngForOf",o.savedResults)}}var P=class c{constructor(i){this.floraPack=i;this.key=i.currentItemKey,this.value=i.floraPack[this.key],this.expression=this.value.toString()}expression="";result=null;savedResults=[];key;value;close(){this.floraPack.openCalc("s"),this.expression="",this.result=null}append(i){this.expression+=i}clear(){this.expression="",this.result=0,this.save()}calculate(){try{this.result=Function(`"use strict"; return (${this.expression})`)()}catch{this.result=null,alert("\u041E\u0448\u0438\u0431\u043A\u0430 \u0432 \u0432\u044B\u0440\u0430\u0436\u0435\u043D\u0438\u0438")}}save(){this.result!==null&&(this.savedResults.unshift(this.result),this.floraPack.floraPack[this.key]=+this.result,this.floraPack.save(),alert(`\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E: ${this.result}`))}static \u0275fac=function(o){return new(o||c)(v(M))};static \u0275cmp=g({type:c,selectors:[["app-calc-modal"]],decls:49,vars:3,consts:[[1,"modal"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"display"],["type","text","readonly","",3,"value"],["class","result",4,"ngIf"],[1,"buttons"],[3,"click"],[1,"op",3,"click"],[1,"actions"],[1,"clear",3,"click"],[1,"save",3,"click"],["class","history",4,"ngIf"],[1,"result"],[1,"history"],[4,"ngFor","ngForOf"]],template:function(o,a){o&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),n(4,"\u041A\u0430\u043B\u044C\u043A\u0443\u043B\u044F\u0442\u043E\u0440"),t(),e(5,"button",3),r("click",function(){return a.close()}),n(6,"\xD7"),t()(),e(7,"div",4),b(8,"input",5),m(9,V,2,1,"div",6),t(),e(10,"div",7)(11,"button",8),r("click",function(){return a.append("7")}),n(12,"7"),t(),e(13,"button",8),r("click",function(){return a.append("8")}),n(14,"8"),t(),e(15,"button",8),r("click",function(){return a.append("9")}),n(16,"9"),t(),e(17,"button",9),r("click",function(){return a.append("/")}),n(18,"/"),t(),e(19,"button",8),r("click",function(){return a.append("4")}),n(20,"4"),t(),e(21,"button",8),r("click",function(){return a.append("5")}),n(22,"5"),t(),e(23,"button",8),r("click",function(){return a.append("6")}),n(24,"6"),t(),e(25,"button",9),r("click",function(){return a.append("*")}),n(26,"*"),t(),e(27,"button",8),r("click",function(){return a.append("1")}),n(28,"1"),t(),e(29,"button",8),r("click",function(){return a.append("2")}),n(30,"2"),t(),e(31,"button",8),r("click",function(){return a.append("3")}),n(32,"3"),t(),e(33,"button",9),r("click",function(){return a.append("-")}),n(34,"-"),t(),e(35,"button",8),r("click",function(){return a.append("0")}),n(36,"0"),t(),e(37,"button",8),r("click",function(){return a.append(".")}),n(38,"."),t(),e(39,"button",8),r("click",function(){return a.calculate()}),n(40,"="),t(),e(41,"button",9),r("click",function(){return a.append("+")}),n(42,"+"),t()(),e(43,"div",10)(44,"button",11),r("click",function(){return a.clear()}),n(45,"C"),t(),e(46,"button",12),r("click",function(){return a.save()}),n(47,"Save"),t()(),m(48,D,5,1,"div",13),t()()),o&2&&(s(8),p("value",a.expression),s(),p("ngIf",a.result!==null),s(39),p("ngIf",a.savedResults.length))},dependencies:[I,T,C],styles:[".open-btn[_ngcontent-%COMP%]{background:#1c69af;color:#fff;padding:10px 20px;border-radius:8px;border:none;cursor:pointer}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;align-items:center;justify-content:center;z-index:100}.modal-content[_ngcontent-%COMP%]{background:#2f2f2f;color:#fff;padding:20px;border-radius:12px;width:300px;box-shadow:0 0 15px #00000080}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer}.display[_ngcontent-%COMP%]{margin:15px 0}.display[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1.2rem;border-radius:8px;border:none;text-align:right}.result[_ngcontent-%COMP%]{text-align:right;margin-top:5px;font-size:1.1rem;color:#00ffae}.buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px;font-size:1.2rem;border-radius:6px;border:none;background:#444;color:#fff;cursor:pointer;transition:background .2s}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#666}.buttons[_ngcontent-%COMP%]   .op[_ngcontent-%COMP%]{background:#1c69af}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:15px}.clear[_ngcontent-%COMP%]{background:#f44336;color:#fff;border:none;padding:10px 15px;border-radius:6px;cursor:pointer}.save[_ngcontent-%COMP%]{background:#4caf50;color:#fff;border:none;padding:10px 15px;border-radius:6px;cursor:pointer}.history[_ngcontent-%COMP%]{margin-top:15px;border-top:1px solid #555;padding-top:10px}.history[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #444}"]})};var j=(c,i)=>i.key;function K(c,i){c&1&&b(0,"app-calc-modal")}function R(c,i){if(c&1){let o=O();e(0,"div",2)(1,"h4",4),n(2),t(),e(3,"div",5)(4,"button",6),r("click",function(){let l=f(o).$implicit,_=d();return k(_.minus(l.key))}),n(5,"-"),t(),e(6,"button",7),n(7),t(),e(8,"button",6),r("click",function(){let l=f(o).$implicit,_=d();return k(_.add(l.key))}),n(9,"+"),t(),e(10,"button",6),r("click",function(){let l=f(o).$implicit,_=d();return k(_.openCalc(l.key))}),n(11,"Calc"),t()()()}if(c&2){let o=i.$implicit;s(2),x(" ",o.key),s(5),h(o.value)}}var M=class c{currentItemKey="";isOpenCalc=!1;isShowMore=!1;floraPack={};floraPackCart={kk:0,"kk-sh":0,cc:0,"cc-sh":0,"tag-5":0,"tag-6":0,nc:0,ext:0,ep:0,paleta:0};floraPackBox={520:0,"533/544":0,560:0,566:0,577:0,588:0,595:0,596:0,597:0,598:0};constructor(){this.floraPack=this.floraPackCart}ngOnInit(){this.getSaved()}showMore(){this.isShowMore=!this.isShowMore,this.floraPack=this.isShowMore?u(u({},this.floraPackBox),this.floraPackCart):this.floraPackCart}add(i){this.floraPack[i]||(this.floraPack[i]=0),this.floraPack[i]++,this.save()}minus(i){this.floraPack[i]>0&&(this.floraPack[i]--,this.save())}openCalc(i){this.isOpenCalc=!this.isOpenCalc,this.currentItemKey=i}save(){try{localStorage.setItem("floraPack",JSON.stringify(this.floraPack))}catch(i){console.error("Error saving FloraPack:",i)}}getSaved(){let i=localStorage.getItem("floraPack");if(i)try{this.floraPack=JSON.parse(i),console.log("\u{1F4E5} Loaded saved FloraPack:",this.floraPack)}catch(o){console.error("Error loading saved data:",o)}}clear(){this.floraPack=u({},this.floraPackCart),this.isShowMore&&(this.floraPack=u(u({},this.floraPackBox),this.floraPackCart)),localStorage.removeItem("floraPack")}static \u0275fac=function(o){return new(o||c)};static \u0275cmp=g({type:c,selectors:[["app-flora-pack"]],decls:10,vars:3,consts:[[4,"ngIf"],["action",""],[1,"card"],[1,"btn",3,"click"],[1,"h4"],[1,"groupBtn"],["type","button",1,"btn",3,"click"],["type","button",1,"btn"]],template:function(o,a){o&1&&(e(0,"section"),m(1,K,1,0,"app-calc-modal",0),e(2,"form",1),y(3,R,12,2,"div",2,j),E(5,"keyvalue"),t(),e(6,"button",3),r("click",function(){return a.showMore()}),n(7,"Save"),t(),e(8,"button",3),r("click",function(){return a.showMore()}),n(9,"Show more"),t()()),o&2&&(s(),p("ngIf",a.isOpenCalc),s(2),S(F(5,1,a.floraPack)))},dependencies:[P,C,w],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}h4[_ngcontent-%COMP%]{color:var(--ligth-color);text-align:center;font-size:20px;margin-top:20px}.card[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:4px;border-radius:3px;border:1px solid white;flex-direction:column;flex-wrap:wrap;align-items:center;align-content:center}.groupBtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px}"]})};export{M as FloraPack};
