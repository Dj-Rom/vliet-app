import{f as T}from"./chunk-WHIQFPGR.js";import{h as H}from"./chunk-R63XIQ3C.js";import{h as k}from"./chunk-AWDAIWPN.js";import{Ca as W,Ta as E,Ua as f,Va as x,Wa as O,Xa as e,Y as b,Ya as t,Z as g,Za as P,a as v,ab as F,b as w,db as p,e as S,eb as y,jb as n,kb as c,sa as o,sb as _,ub as u,ya as C}from"./chunk-XTGCJEIM.js";var B=(s,l)=>l.id;function $(s,l){if(s&1&&(e(0,"option",3),n(1),t()),s&2){let i=l.$implicit,a=y();O("value",i),o(),c(a.months[i])}}function z(s,l){if(s&1){let i=F();e(0,"tr")(1,"td"),n(2),t(),e(3,"td"),n(4),t(),e(5,"td"),n(6),_(7,"date"),t(),e(8,"td"),n(9),_(10,"date"),t(),e(11,"td"),n(12),t(),e(13,"td"),n(14),t(),e(15,"td"),n(16),t(),e(17,"td")(18,"img",8),p("click",function(){let d=b(i).$implicit,r=y();return g(r.editWaybill(d.id))}),t()(),e(19,"td")(20,"img",9),p("click",function(){let d=b(i).$implicit,r=y();return g(r.deleteWaybill(d.id))}),t()()()}if(s&2){let i=l.$implicit;o(2),c(i.truck),o(2),c(i.trailer),o(2),c(u(7,7,i.dataStart,"yyyy-MM-dd HH:mm")),o(3),c(u(10,10,i.dataFinish,"yyyy-MM-dd HH:mm")),o(3),c(i.tripTime),o(2),c(i.billableDays),o(2),c(i.notes)}}var I=class s{constructor(l){this.fb=l}listWaybill=[];filteredWaybills=[];selectedMonth;months=["January","February","March","April","May","June","July","August","September","October","November","December"];monthsFromFirebase=[];ngOnInit(){return S(this,null,function*(){this.listWaybill=yield this.fb.getWillBillsHistory(),console.log(this.listWaybill),this.listWaybill=this.listWaybill.map(l=>{let i=new Date(l.dataStart),r=(new Date(l.dataFinish).getTime()-i.getTime())/(1e3*60*60),M=Math.floor(r),D=Math.floor((r-M)*60),N=`${M}h ${D}m`,h=i.getMonth();this.monthsFromFirebase.includes(h)||this.monthsFromFirebase.push(h);let m=0;return r<=12?m=.5:r<=24?m=1:m=Math.ceil(r/12)*.5,w(v({},l),{tripTime:N,billableDays:m,month:h})}),this.filteredWaybills=this.listWaybill})}onMonthChange(l){let i=l.target,a=Number(i.value);this.selectedMonth=a,isNaN(a)?this.filteredWaybills=this.listWaybill:(this.filteredWaybills=this.listWaybill.filter(d=>{let r=new Date(d.dataStart);return console.log(r.getMonth()==a),r.getMonth()==a}),console.log(this.filteredWaybills))}event=event;editWaybill(l){}deleteWaybill(l){}static \u0275fac=function(i){return new(i||s)(C(H))};static \u0275cmp=W({type:s,selectors:[["app-waybill-history"]],decls:34,vars:0,consts:[[1,"waybill-history"],[3,"change"],["value",""],[3,"value"],[1,"table-striped"],[1,"btn"],["src","assets/svg/map.svg","alt","+ New Address",1,"icon-svg"],["routerLink","/app/waybill",1,"nav-link"],["src","assets/svg/edit.svg","alt","Edit",1,"icon-svg",3,"click"],["src","assets/svg/delete.svg","alt","Delete",1,"icon-svg",3,"click"]],template:function(i,a){i&1&&(e(0,"section",0)(1,"label"),n(2,"Choose month:"),t(),e(3,"select",1),p("change",function(r){return a.onMonthChange(r)}),e(4,"option",2),n(5,"All"),t(),f(6,$,2,2,"option",3,E),t(),e(8,"table",4)(9,"tr")(10,"th"),n(11,"Truck"),t(),e(12,"th"),n(13,"Trailer"),t(),e(14,"th"),n(15,"Start"),t(),e(16,"th"),n(17,"Finish"),t(),e(18,"th"),n(19,"Trip Time"),t(),e(20,"th"),n(21,"Billable Days"),t(),e(22,"th"),n(23,"Notes"),t(),e(24,"th"),n(25,"Edit"),t(),e(26,"th"),n(27,"Delete"),t()(),f(28,z,21,13,"tr",null,B),t(),e(30,"div",5),P(31,"img",6),e(32,"a",7),n(33,"add new Waybill"),t()()()),i&2&&(o(6),x(a.monthsFromFirebase),o(22),x(a.filteredWaybills))},dependencies:[T,k],styles:[".waybill-history[_ngcontent-%COMP%]{margin:10px;display:flex;flex-direction:column;align-items:center;width:95%;height:100%;border:1px solid white;border-radius:10px;padding:10px;text-align:center;color:#fff;font-size:2vw;background:#1c69af}.waybill-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:90%;border-collapse:collapse;margin-top:10px;font-size:10px}.waybill-history[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:green;color:#fff;padding:6px;text-align:center}.waybill-history[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px;text-align:center}.waybill-history[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#fff;color:#000}.waybill-history[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background:#e3f1ff;color:#000}.waybill-history[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin-right:10px}.waybill-history[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 8px;border-radius:6px;border:1px solid #ccc;font-size:1rem}@media screen and (max-width: 660px){.waybill-history[_ngcontent-%COMP%]{font-size:3vw}.waybill-history[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .waybill-history[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:2px;font-size:2.5vw}}"]})};export{I as WaybillHistory};
