import{a as R,b as J}from "./chunk-BG2POIH2.js";import{f as G}from "./chunk-MHAYUD63.js";import{h as S}from "./chunk-IRSRVVSW.js";import{$a as v,Aa as b,Cb as U,Eb as $,Ib as q,Ja as A,Ka as I,La as L,M as E,Ma as V,Na as _,Oa as i,Pa as o,Qa as f,Ra as T,Sa as F,Sb as H,Ta as u,Ua as w,V as p,Va as s,W as m,Wa as j,Za as B,_a as d,ab as N,cb as h,db as M,e as W,eb as C,ib as D,l as P,na as k,pa as l,ua as g,wb as z,ya as y}from "./chunk-L2NJ6PD6.js";var x=class t{client$=new P(null);isOpen$=new P(!1);open(r){console.log("open modal",r),this.client$.next(r),this.isOpen$.next(!0)}close(){this.isOpen$.next(!1),this.client$.next(null)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=E({token:t,factory:t.\u0275fac,providedIn:"root"})};function ee(t, r){t&1&&f(0,"div",3)}function te(t, r){if(t&1){let e=u();i(0,"td")(1,"input",9),C("ngModelChange",function(n){p(e);let a=s(3);return M(a.client.company,n)||(a.client.company=n),m(n)}),o()(),i(2,"td")(3,"input",10),C("ngModelChange",function(n){p(e);let a=s(3);return M(a.client.address,n)||(a.client.address=n),m(n)}),o()(),i(4,"td")(5,"input",11),C("ngModelChange",function(n){p(e);let a=s(3);return M(a.client.google_link,n)||(a.client.google_link=n),m(n)}),o()(),i(6,"td",6)(7,"input",12),C("ngModelChange",function(n){p(e);let a=s(3);return M(a.client.gps,n)||(a.client.gps=n),m(n)}),o()(),i(8,"td")(9,"input",13),C("ngModelChange",function(n){p(e);let a=s(3);return M(a.client.notes,n)||(a.client.notes=n),m(n)}),o()()}if(t&2){let e=s(3);l(),h("ngModel",e.client.company),l(2),h("ngModel",e.client.address),l(2),h("ngModel",e.client.google_link),l(2),h("ngModel",e.client.gps),l(2),h("ngModel",e.client.notes)}}function ne(t, r){if(t&1&&(i(0,"td"),d(1),o()),t&2){let e=s(4);l(),v(e.client.notes)}}function ie(t, r){if(t&1&&(i(0,"td"),d(1),o(),i(2,"td"),d(3),o(),i(4,"td")(5,"a",14),d(6," Google link "),o()(),i(7,"td",6),d(8),o(),b(9,ne,2,1,"td",15)),t&2){let e=s(3);l(),v(e.client.company),l(2),v(e.client.address),l(2),_("href",e.client.google_link,k),l(3),v(e.client.gps),l(),_("ngIf",e.isAuth())}}function oe(t, r){if(t&1){let e=u();i(0,"button",16),w("click",function(){p(e);let n=s(3);return m(n.save())}),d(1,"Save"),o()}}function re(t, r){if(t&1){let e=u();T(0),i(1,"table")(2,"thead")(3,"tr")(4,"th"),d(5,"Company"),o(),i(6,"th"),d(7,"Address"),o(),i(8,"th"),d(9,"Google Link"),o(),i(10,"th",6),d(11,"GPS"),o(),i(12,"th"),d(13,"Note"),o()()(),i(14,"tbody")(15,"tr"),A(16,te,10,5)(17,ie,10,5),o()()(),b(18,oe,2,0,"button",7),i(19,"button",8),w("click",function(){p(e);let n=s(2);return m(n.edit())}),d(20,"Edit"),o(),i(21,"button",8),w("click",function(){p(e);let n=s(2);return m(n.close())}),d(22,"Close"),o(),F()}if(t&2){let e=s(2);l(16),I(e.isEdit?16:17),l(2),_("ngIf",e.isEdit)}}function ae(t, r){t&1&&(i(0,"p"),d(1,"Loading client data..."),o())}function le(t, r){if(t&1&&(i(0,"section",4),b(1,re,23,2,"ng-container",5)(2,ae,2,0,"ng-template",null,0,D),o()),t&2){let e=j(3),c=s();l(),_("ngIf",c.client)("ngIfElse",e)}}var O=class t{constructor(r, e, c, n){this.modalService=r;this.authService=e;this.fb=c;this.alertService=n;this.modalService.client$.subscribe(a=>this.client=a),this.modalService.isOpen$.subscribe(a=>this.isOpen=a)}client=null;isOpen=!1;isEdit=!1;isAuth(){return this.authService.getUserEmail()}edit(){this.isEdit=!this.isEdit}close(){this.modalService.close(),this.isEdit=!1}save(){this.isAuth()&&this.client&&this.fb.updateSharedAddress(this.client?.id,this.client).then(()=>{this.alertService.show("success","Client saved successfully!"),this.modalService.close(),this.isEdit=!1}, r=>{console.error("Failed to update address:",r)})}static \u0275fac=function(e){return new(e||t)(g(x),g(J),g(S),g(R))};static \u0275cmp=y({type:t,selectors:[["app-modal-window"]],decls:2,vars:2,consts:[["loading",""],["class","backgroundForMobileModal",4,"ngIf"],["class","modal-window",4,"ngIf"],[1,"backgroundForMobileModal"],[1,"modal-window"],[4,"ngIf","ngIfElse"],[1,"note"],["class","btnSave",3,"click",4,"ngIf"],[1,"btn",3,"click"],["type","text","placeholder","Write company name",3,"ngModelChange","ngModel"],["type","text","placeholder","Write address",3,"ngModelChange","ngModel"],["type","text","placeholder","Write link for Google Maps",3,"ngModelChange","ngModel"],["type","text","placeholder","Write GPS for example: 22.222222, 22.222222",3,"ngModelChange","ngModel"],["type","text","placeholder","Write notes",3,"ngModelChange","ngModel"],["target","_blank","rel","noopener noreferrer",3,"href"],[4,"ngIf"],[1,"btnSave",3,"click"]],template:function(e, c){e&1&&b(0,ee,1,0,"div",1)(1,le,4,2,"section",2),e&2&&(_("ngIf",c.isOpen),l(),_("ngIf",c.isOpen))},dependencies:[z,H,U,$,q],styles:[".modal-window[_ngcontent-%COMP%]{max-width:566px;height:200px;margin:5px;padding:1rem;background:#1c69af;opacity:.8;color:var(--ligth-color);border-radius:10px;display:grid;width:100%;justify-content:center;align-items:center;align-content:space-around;border:2px solid white}.modal-window[_ngcontent-%COMP%]   .btnSave[_ngcontent-%COMP%]{position:relative;background-color:green;color:#fff;height:32px}.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:column;align-content:space-between;align-items:stretch}.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid white;min-width:88px;width:88px}:is(.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%])   input[_ngcontent-%COMP%]{width:100%}.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{width:150px}.btn[_ngcontent-%COMP%]{border-radius:6px;position:relative;left:calc(100% - 84px);width:64px;height:32px;background:#cd5c5c}@media screen and (max-width: 640px){.backgroundForMobileModal[_ngcontent-%COMP%]{background-color:#000;opacity:.9;position:absolute;z-index:1;top:0;width:100%;height:100%}.modal-window[_ngcontent-%COMP%]{z-index:2}.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid white;font-size:10px;min-width:11vw}}"]})};var de=(t, r)=>r.id;function ce(t, r){if(t&1){let e=u();i(0,"button",4),w("click",function(){let n=p(e).$implicit,a=s();return m(a.modalService.open(n))}),d(1),o()}if(t&2){let e=r.$implicit;_("id",e.id),l(),N(" ",e.company," ")}}var X=class t{constructor(r, e){this.fb=r;this.modalService=e}listAddress=[];ngOnInit(){return W(this,null,function*(){try{this.listAddress=yield this.fb.getSharedAddresses(),console.log("\u{1F4E6} Addresses loaded:",this.listAddress)}catch(r){console.error("Failed to load addresses:",r)}})}ModalService=x;navigator=navigator;static \u0275fac=function(e){return new(e||t)(g(S),g(x))};static \u0275cmp=y({type:t,selectors:[["app-load-location"]],decls:10,vars:2,consts:[[1,"h3LoadLocation"],[1,"groupCompanyBtn"],[1,"companySelectBtn",3,"id"],["routerLink","/app/add-new-address",1,"btnAddCompany"],[1,"companySelectBtn",3,"click","id"]],template:function(e, c){e&1&&(f(0,"app-modal-window"),i(1,"h3",0),d(2,"Company:"),o(),f(3,"br"),i(4,"div",1),L(5,ce,2,2,"button",2,de),o(),f(7,"br"),i(8,"button",3),d(9,"+"),o()),e&2&&(B("display: flex;justify-content: center;"),l(5),V(c.listAddress))},dependencies:[O,G],styles:["*[_ngcontent-%COMP%]{color:var(--ligth-color)}th[_ngcontent-%COMP%]{padding:2px 10px;border:2px solid var(--ligth-color)}.groupCompanyBtn[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}button[_ngcontent-%COMP%]{background:#1c69af;width:128px;height:80px;padding:10px 20px;border-radius:5px}.modalAddCompany[_ngcontent-%COMP%]{padding:2.5vw;margin-top:20px;display:flex;flex-direction:column;align-items:center;width:95vw;background:var(--gray-color);height:30vh;justify-content:center;align-content:center;flex-wrap:wrap}.modalAddCompany[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.modalAddCompany[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:90vw}.modalAddCompany[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:10px 2.5vw;width:85vw}.btnAddCompany[_ngcontent-%COMP%]{position:fixed;right:30px;bottom:30px;width:50px;height:50px;border-radius:50%;font-size:40px;padding:1px;background-color:green}@media screen and (max-width: 640px){.h3LoadLocation[_ngcontent-%COMP%]{position:absolute;top:40px;margin-left:40px}.groupCompanyBtn[_ngcontent-%COMP%]{position:absolute;top:80px;display:flex;flex-wrap:wrap;justify-content:center}}"]})};export{X as LoadLocation};
