import{e as M,f as E}from "./chunk-MHAYUD63.js";import{g as D,h as A}from "./chunk-IRSRVVSW.js";import{$a as S,Aa as d,Cb as I,Db as c,Eb as P,Fb as O,Gb as T,Hb as _,Ja as w,Jb as k,Ka as y,Lb as F,Mb as N,Na as s,Oa as n,Pa as l,Qa as u,Tb as q,Ua as v,Va as f,_a as m,e as x,fb as C,pa as a,ua as h,wb as R,ya as b}from "./chunk-L2NJ6PD6.js";var G=()=>["/login"];function j(e, o){e&1&&(n(0,"small"),m(1,"Code is required"),l())}function V(e, o){e&1&&(n(0,"small"),m(1,"Minimum 4 characters"),l())}function z(e, o){if(e&1&&(n(0,"div",12),d(1,j,2,0,"small",11)(2,V,2,0,"small",11),l()),e&2){let r,t,i=f();a(),s("ngIf",(r=i.form.get("code"))==null||r.errors==null?null:r.errors.required),a(),s("ngIf",(t=i.form.get("code"))==null||t.errors==null?null:t.errors.minlength)}}function U(e, o){e&1&&(n(0,"small"),m(1,"Email is required"),l())}function W(e, o){e&1&&(n(0,"small"),m(1,"Invalid email format"),l())}function Y(e, o){if(e&1&&(n(0,"div",12),d(1,U,2,0,"small",11)(2,W,2,0,"small",11),l()),e&2){let r,t,i=f();a(),s("ngIf",(r=i.form.get("username"))==null||r.errors==null?null:r.errors.required),a(),s("ngIf",(t=i.form.get("username"))==null||t.errors==null?null:t.errors.email)}}function $(e, o){e&1&&u(0,"img",7)}function H(e, o){e&1&&u(0,"img",8)}function Z(e, o){e&1&&(n(0,"small"),m(1,"Password is required"),l())}function B(e, o){e&1&&(n(0,"small"),m(1,"Minimum 6 characters"),l())}function J(e, o){e&1&&(n(0,"small"),m(1," Must contain 1 uppercase letter, 1 number, and 1 special character "),l())}function K(e, o){if(e&1&&(n(0,"div",12),d(1,Z,2,0,"small",11)(2,B,2,0,"small",11)(3,J,2,0,"small",11),l()),e&2){let r,t,i,p=f();a(),s("ngIf",(r=p.form.get("password"))==null||r.errors==null?null:r.errors.required),a(),s("ngIf",(t=p.form.get("password"))==null||t.errors==null?null:t.errors.minlength),a(),s("ngIf",(i=p.form.get("password"))==null||i.errors==null?null:i.errors.pattern)}}function Q(e, o){if(e&1&&(n(0,"div",13),m(1),l()),e&2){let r=f();a(),S(r.message)}}function X(e, o){e&1&&(n(0,"span"),m(1,"Register"),l())}function ee(e, o){e&1&&(n(0,"span"),m(1,"\u23F3 Processing..."),l())}var L=class e{constructor(o, r){this.fb=o;this.router=r}isShow=!1;loading=!1;message="";CODE=D;form=new T({code:new _("",[c.required,c.minLength(4)]),username:new _("",[c.required,c.email]),password:new _("",[c.required,c.minLength(6),c.pattern(/^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]).+$/)])});setShow(){this.isShow=!this.isShow}onSubmit(){return x(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.message="";let{username:o,password:r,code:t}=this.form.value;try{if(t!==this.CODE){this.message="Invalid registration code.",this.loading=!1;return}let i=yield this.fb.signUp(o,r,t);i?.uid&&(yield this.fb.saveUserData(i.uid,{email:o,code:t,createdAt:new Date().toISOString()}),console.log("\u2705 Registration successful:",i.uid),this.message="Registration successful! Redirecting...",setTimeout(()=>this.router.navigate(["/login"]),2e3))}catch(i){console.error("\u274C Registration failed:",i),this.message=i.message||"Registration failed. Try again."}finally{this.loading=!1}})}static \u0275fac=function(r){return new(r||e)(h(A),h(M))};static \u0275cmp=b({type:e,selectors:[["app-registration"]],decls:24,vars:12,consts:[[1,"auth-link",3,"routerLink"],[1,"auth-form",3,"ngSubmit","formGroup"],["formControlName","code","type","password","placeholder","Enter invite code"],["class","error",4,"ngIf"],["formControlName","username","type","email","placeholder","Write your email"],["formControlName","password","placeholder","Write your password",3,"type"],["type","button",1,"auth-show-password",3,"click"],["src","/assets/svg/unshow.svg","width","25","height","25","alt","Hide password"],["src","/assets/svg/show.svg","width","25","height","25","alt","Show password"],["class","info-message",4,"ngIf"],["type","submit",1,"auth-btn",3,"disabled"],[4,"ngIf"],[1,"error"],[1,"info-message"]],template:function(r, t){if(r&1&&(n(0,"span"),m(1,"Already have an account? "),l(),n(2,"a",0),m(3," Log in"),l(),n(4,"form",1),v("ngSubmit",function(){return t.onSubmit()}),n(5,"label"),m(6," Registration Code: "),u(7,"input",2),l(),d(8,z,3,2,"div",3),n(9,"label"),m(10," Email: "),u(11,"input",4),l(),d(12,Y,3,2,"div",3),n(13,"label"),m(14," Password: "),u(15,"input",5),n(16,"button",6),v("click",function(){return t.setShow()}),w(17,$,1,0,"img",7)(18,H,1,0,"img",8),l()(),d(19,K,4,3,"div",3)(20,Q,2,1,"div",9),n(21,"button",10),d(22,X,2,0,"span",11)(23,ee,2,0,"span",11),l()()),r&2){let i,p,g;a(2),s("routerLink",C(11,G)),a(2),s("formGroup",t.form),a(4),s("ngIf",((i=t.form.get("code"))==null?null:i.invalid)&&((i=t.form.get("code"))==null?null:i.touched)),a(4),s("ngIf",((p=t.form.get("username"))==null?null:p.invalid)&&((p=t.form.get("username"))==null?null:p.touched)),a(3),s("type",t.isShow?"text":"password"),a(2),y(t.isShow?17:18),a(2),s("ngIf",((g=t.form.get("password"))==null?null:g.invalid)&&((g=t.form.get("password"))==null?null:g.touched)),a(),s("ngIf",t.message),a(),s("disabled",t.loading),a(),s("ngIf",!t.loading),a(),s("ngIf",t.loading)}},dependencies:[q,k,I,P,O,F,N,R,E],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}a[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:var(--ligth-color)}input[_ngcontent-%COMP%]{margin-top:8px;color:var(--ligth-color);background:var(--dark-color);width:400px;height:44px;gap:10px;opacity:1;padding:12px 20px;border-radius:2px;border-width:1px}label[_ngcontent-%COMP%]{margin-top:16px;color:var(--ligth-color, white);width:400px}.auth-btn[_ngcontent-%COMP%]{margin-top:16px;height:44px;gap:10px;width:400px;padding:12px 20px;border-radius:2px;border-width:1px}.error[_ngcontent-%COMP%]{color:red}.auth-btn[_ngcontent-%COMP%]{--ripple-duration: .7s;position:relative;display:inline-block;border:1px solid rgba(255,255,255,.18);cursor:pointer;-webkit-user-select:none;user-select:none;color:#e6faff;font-weight:600;font-size:16px;padding:14px 36px;border-radius:4px;background:#ffffff14;backdrop-filter:blur(10px) saturate(180%);-webkit-backdrop-filter:blur(10px) saturate(180%);box-shadow:0 8px 24px #0000004d,inset 0 1px #ffffff26;transition:transform .2s cubic-bezier(.2,.9,.3,1),box-shadow .2s,background .2s;overflow:hidden;outline:none}.auth-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);background:#ffffff1f;box-shadow:0 10px 30px #00ffff26}.auth-btn[_ngcontent-%COMP%]:active{transform:translateY(0);background:#ffffff2e}.auth-btn[_ngcontent-%COMP%]   .ripple[_ngcontent-%COMP%]{position:absolute;border-radius:50%;transform:translate(-50%,-50%) scale(0);opacity:.9;pointer-events:none;mix-blend-mode:screen;will-change:transform,opacity}.auth-show-password[_ngcontent-%COMP%]{background:none;color:#5f646d;border:none;position:absolute;transform:translate(-34px,17px);cursor:pointer}@media screen and (max-width: 640px){.app-login[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}form[_ngcontent-%COMP%]{align-items:center}label[_ngcontent-%COMP%], input[_ngcontent-%COMP%], .auth-btn[_ngcontent-%COMP%]{width:70vw}.auth-show-password[_ngcontent-%COMP%]{transform:translate(70vw,-35px)}}"]})};export{L as a};
