import{a as J}from"./chunk-NIJ24ZSC.js";import{f as G}from"./chunk-WHIQFPGR.js";import{a as R}from"./chunk-LD5LC5PG.js";import{h as S}from"./chunk-R63XIQ3C.js";import{a as U,c as $,g as q,r as H}from"./chunk-KBOLL6IX.js";import{g as z}from"./chunk-AWDAIWPN.js";import{$a as j,Ca as v,Ha as y,O as E,Ra as A,Sa as I,Ua as L,Va as V,Wa as _,Xa as i,Y as p,Ya as o,Z as m,Za as f,_a as T,ab as w,db as u,e as W,eb as s,fb as F,ib as B,jb as d,kb as b,l as P,lb as N,nb as h,ob as M,pb as C,qa as k,sa as l,vb as D,ya as g}from"./chunk-XTGCJEIM.js";var x=class t{client$=new P(null);isOpen$=new P(!1);open(a){console.log("open modal",a),this.client$.next(a),this.isOpen$.next(!0),document.body.style.overflow="hidden"}close(){this.isOpen$.next(!1),this.client$.next(null),document.body.style.overflow="auto"}static \u0275fac=function(e){return new(e||t)};static \u0275prov=E({token:t,factory:t.\u0275fac,providedIn:"root"})};function ee(t,a){t&1&&f(0,"div",3)}function te(t,a){if(t&1){let e=w();i(0,"td")(1,"input",10),C("ngModelChange",function(n){p(e);let r=s(3);return M(r.client.company,n)||(r.client.company=n),m(n)}),o()(),i(2,"td")(3,"input",11),C("ngModelChange",function(n){p(e);let r=s(3);return M(r.client.address,n)||(r.client.address=n),m(n)}),o()(),i(4,"td")(5,"input",12),C("ngModelChange",function(n){p(e);let r=s(3);return M(r.client.google_link,n)||(r.client.google_link=n),m(n)}),o()(),i(6,"td",6)(7,"input",13),C("ngModelChange",function(n){p(e);let r=s(3);return M(r.client.gps,n)||(r.client.gps=n),m(n)}),o()(),i(8,"td")(9,"input",14),C("ngModelChange",function(n){p(e);let r=s(3);return M(r.client.notes,n)||(r.client.notes=n),m(n)}),o()()}if(t&2){let e=s(3);l(),h("ngModel",e.client.company),l(2),h("ngModel",e.client.address),l(2),h("ngModel",e.client.google_link),l(2),h("ngModel",e.client.gps),l(2),h("ngModel",e.client.notes)}}function ne(t,a){if(t&1&&(i(0,"td"),d(1),o()),t&2){let e=s(4);l(),b(e.client.notes)}}function ie(t,a){if(t&1&&(i(0,"td"),d(1),o(),i(2,"td"),d(3),o(),i(4,"td")(5,"a",15),d(6," Google link "),o()(),i(7,"td",6),d(8),o(),y(9,ne,2,1,"td",16)),t&2){let e=s(3);l(),b(e.client.company),l(2),b(e.client.address),l(2),_("href",e.client.google_link,k),l(3),b(e.client.gps),l(),_("ngIf",e.isAuth())}}function oe(t,a){if(t&1){let e=w();i(0,"button",17),u("click",function(){p(e);let n=s(3);return m(n.save())}),d(1,"Save"),o()}}function ae(t,a){if(t&1){let e=w();T(0),i(1,"table")(2,"thead")(3,"tr")(4,"th"),d(5,"Company"),o(),i(6,"th"),d(7,"Address"),o(),i(8,"th"),d(9,"Google Link"),o(),i(10,"th",6),d(11,"GPS"),o(),i(12,"th"),d(13,"Note"),o()()(),i(14,"tbody")(15,"tr"),A(16,te,10,5)(17,ie,10,5),o()()(),y(18,oe,2,0,"button",7),i(19,"div",8)(20,"button",9),u("click",function(){p(e);let n=s(2);return m(n.edit())}),d(21,"Edit"),o(),i(22,"button",9),u("click",function(){p(e);let n=s(2);return m(n.close())}),d(23,"Close"),o()(),j()}if(t&2){let e=s(2);l(16),I(e.isEdit?16:17),l(2),_("ngIf",e.isEdit)}}function re(t,a){t&1&&(i(0,"p"),d(1,"Loading client data..."),o())}function le(t,a){if(t&1&&(i(0,"section",4),y(1,ae,24,2,"ng-container",5)(2,re,2,0,"ng-template",null,0,D),o()),t&2){let e=F(3),c=s();l(),_("ngIf",c.client)("ngIfElse",e)}}var O=class t{constructor(a,e,c,n){this.modalService=a;this.authService=e;this.fb=c;this.alertService=n;this.modalService.client$.subscribe(r=>this.client=r),this.modalService.isOpen$.subscribe(r=>this.isOpen=r)}client=null;isOpen=!1;isEdit=!1;isAuth(){return this.authService.getUserEmail()}edit(){this.isEdit=!this.isEdit}close(){this.modalService.close(),this.isEdit=!1}save(){this.isAuth()&&this.client&&this.fb.updateSharedAddress(this.client?.id,this.client).then(()=>{this.alertService.show("success","Client saved successfully!"),this.modalService.close(),this.isEdit=!1},a=>{console.error("Failed to update address:",a)})}static \u0275fac=function(e){return new(e||t)(g(x),g(J),g(S),g(R))};static \u0275cmp=v({type:t,selectors:[["app-modal-window"]],decls:2,vars:2,consts:[["loading",""],["class","backgroundForMobileModal",4,"ngIf"],["class","modal-window",4,"ngIf"],[1,"backgroundForMobileModal"],[1,"modal-window"],[4,"ngIf","ngIfElse"],[1,"note"],["class","btnSave btn",3,"click",4,"ngIf"],[1,"btns"],[1,"btn",3,"click"],["type","text","placeholder","Write company name",3,"ngModelChange","ngModel"],["type","text","placeholder","Write address",3,"ngModelChange","ngModel"],["type","text","placeholder","Write link for Google Maps",3,"ngModelChange","ngModel"],["type","text","placeholder","Write GPS for example: 22.222222, 22.222222",3,"ngModelChange","ngModel"],["type","text","placeholder","Write notes",3,"ngModelChange","ngModel"],["target","_blank","rel","noopener noreferrer",3,"href"],[4,"ngIf"],[1,"btnSave","btn",3,"click"]],template:function(e,c){e&1&&y(0,ee,1,0,"div",1)(1,le,4,2,"section",2),e&2&&(_("ngIf",c.isOpen),l(),_("ngIf",c.isOpen))},dependencies:[z,H,U,$,q],styles:[".modal-window[_ngcontent-%COMP%]{max-width:566px;height:200px;margin:5px;padding:1rem;background:#1c69af;opacity:.8;color:var(--ligth-color);border-radius:10px;display:grid;width:100%;justify-content:center;align-items:center;align-content:space-around;border:2px solid white}.modal-window[_ngcontent-%COMP%]   .btnSave[_ngcontent-%COMP%]{background-color:green;color:#fff}.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:column;align-content:space-between;align-items:stretch}.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid white;min-width:88px;width:88px}:is(.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%])   input[_ngcontent-%COMP%]{width:100%}.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{width:150px}.btns[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}.btn[_ngcontent-%COMP%]{margin-top:10px;max-width:200px;max-height:64px}@media screen and (max-width: 640px){.backgroundForMobileModal[_ngcontent-%COMP%]{background-color:#000;opacity:.9;position:absolute;z-index:1;top:0;width:100%;height:100%}.btnSave[_ngcontent-%COMP%]{max-width:100%}.modal-window[_ngcontent-%COMP%]{z-index:2}.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid white;font-size:10px;min-width:11vw}}"]})};var de=(t,a)=>a.id;function ce(t,a){if(t&1){let e=w();i(0,"button",4),u("click",function(){let n=p(e).$implicit,r=s();return m(r.modalService.open(n))}),d(1),o()}if(t&2){let e=a.$implicit;_("id",e.id),l(),N(" ",e.company," ")}}var X=class t{constructor(a,e){this.fb=a;this.modalService=e}listAddress=[];ngOnInit(){return W(this,null,function*(){try{this.listAddress=yield this.fb.getSharedAddresses(),console.log("\u{1F4E6} Addresses loaded:",this.listAddress)}catch(a){console.error("Failed to load addresses:",a)}})}ModalService=x;navigator=navigator;static \u0275fac=function(e){return new(e||t)(g(S),g(x))};static \u0275cmp=v({type:t,selectors:[["app-load-location"]],decls:10,vars:2,consts:[[1,"h3LoadLocation"],[1,"groupCompanyBtn"],[1,"btn","companySelectBtn",3,"id"],["routerLink","/app/add-new-address",1,"btnAddCompany"],[1,"btn","companySelectBtn",3,"click","id"]],template:function(e,c){e&1&&(f(0,"app-modal-window"),i(1,"h3",0),d(2,"Company:"),o(),f(3,"br"),i(4,"div",1),L(5,ce,2,2,"button",2,de),o(),f(7,"br"),i(8,"button",3),d(9,"+"),o()),e&2&&(B("display: flex;justify-content: center;"),l(5),V(c.listAddress))},dependencies:[O,G],styles:["*[_ngcontent-%COMP%]{color:var(--ligth-color)}th[_ngcontent-%COMP%]{padding:2px 10px;border:2px solid var(--ligth-color)}.groupCompanyBtn[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:10px}.companySelectBtn[_ngcontent-%COMP%]{width:128px;height:80px;padding:10px 20px;border-radius:5px}.modalAddCompany[_ngcontent-%COMP%]{padding:2.5vw;margin-top:20px;display:flex;flex-direction:column;align-items:center;width:95vw;background:var(--gray-color);height:30vh;justify-content:center;align-content:center;flex-wrap:wrap}.modalAddCompany[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.modalAddCompany[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:90vw}.modalAddCompany[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:10px 2.5vw;width:85vw}.btnAddCompany[_ngcontent-%COMP%]{position:fixed;right:30px;bottom:30px;width:50px;height:50px;border-radius:50%;font-size:40px;padding:1px;background-color:green}@media screen and (max-width: 640px){.h3LoadLocation[_ngcontent-%COMP%]{position:absolute;top:40px;margin-left:40px;width:40px}.companySelectBtn[_ngcontent-%COMP%]{width:90vw;margin-top:8px}.groupCompanyBtn[_ngcontent-%COMP%]{left:0;position:absolute;top:80px;display:flex;flex-wrap:wrap;justify-content:center}}"]})};export{X as LoadLocation};
