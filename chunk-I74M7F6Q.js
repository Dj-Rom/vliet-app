import{g as D,h as A}from"./chunk-QOD2KCC7.js";import{a as T,b as c,c as M,d as P,e as O,f as _,h as k,j as F,k as N,r as q}from"./chunk-3VYYN7AO.js";import{e as E,f as I}from"./chunk-BLQHNSRG.js";import{$a as g,Ba as x,Eb as R,Fa as p,Pa as S,Qa as y,Ta as s,Ua as n,Va as l,Wa as u,_a as h,e as w,eb as m,fb as b,mb as C,sa as a,xa as v}from"./chunk-BWAIJMCI.js";var G=()=>["/auth/login"];function j(e,o){e&1&&(n(0,"small"),m(1,"Code is required"),l())}function V(e,o){e&1&&(n(0,"small"),m(1,"Minimum 4 characters"),l())}function U(e,o){if(e&1&&(n(0,"div",12),p(1,j,2,0,"small",11)(2,V,2,0,"small",11),l()),e&2){let r,t,i=g();a(),s("ngIf",(r=i.form.get("code"))==null||r.errors==null?null:r.errors.required),a(),s("ngIf",(t=i.form.get("code"))==null||t.errors==null?null:t.errors.minlength)}}function W(e,o){e&1&&(n(0,"small"),m(1,"Email is required"),l())}function $(e,o){e&1&&(n(0,"small"),m(1,"Invalid email format"),l())}function H(e,o){if(e&1&&(n(0,"div",12),p(1,W,2,0,"small",11)(2,$,2,0,"small",11),l()),e&2){let r,t,i=g();a(),s("ngIf",(r=i.form.get("username"))==null||r.errors==null?null:r.errors.required),a(),s("ngIf",(t=i.form.get("username"))==null||t.errors==null?null:t.errors.email)}}function Z(e,o){e&1&&u(0,"img",7)}function z(e,o){e&1&&u(0,"img",8)}function B(e,o){e&1&&(n(0,"small"),m(1,"Password is required"),l())}function J(e,o){e&1&&(n(0,"small"),m(1,"Minimum 6 characters"),l())}function K(e,o){e&1&&(n(0,"small"),m(1," Must contain 1 uppercase letter, 1 number, and 1 special character "),l())}function Q(e,o){if(e&1&&(n(0,"div",12),p(1,B,2,0,"small",11)(2,J,2,0,"small",11)(3,K,2,0,"small",11),l()),e&2){let r,t,i,d=g();a(),s("ngIf",(r=d.form.get("password"))==null||r.errors==null?null:r.errors.required),a(),s("ngIf",(t=d.form.get("password"))==null||t.errors==null?null:t.errors.minlength),a(),s("ngIf",(i=d.form.get("password"))==null||i.errors==null?null:i.errors.pattern)}}function X(e,o){if(e&1&&(n(0,"div",13),m(1),l()),e&2){let r=g();a(),b(r.message)}}function Y(e,o){e&1&&(n(0,"span"),m(1,"Register"),l())}function ee(e,o){e&1&&(n(0,"span"),m(1,"\u23F3 Processing..."),l())}var L=class e{constructor(o,r){this.fb=o;this.router=r}isShow=!1;loading=!1;message="";CODE=D;form=new O({code:new _("",[c.required,c.minLength(4)]),username:new _("",[c.required,c.email]),password:new _("",[c.required,c.minLength(6),c.pattern(/^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]).+$/)])});setShow(){this.isShow=!this.isShow}onSubmit(){return w(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.message="";let{username:o,password:r,code:t}=this.form.value;try{if(t!==this.CODE){this.message="Invalid registration code.",this.loading=!1;return}let i=yield this.fb.signUp(o,r,t);i?.uid&&(yield this.fb.saveUserData(i.uid,{email:o,code:t,createdAt:new Date().toISOString()}),console.log("\u2705 Registration successful:",i.uid),this.message="Registration successful! Redirecting...",setTimeout(()=>this.router.navigate(["/login"]),2e3))}catch(i){console.error("\u274C Registration failed:",i),this.message=i.message||"Registration failed. Try again."}finally{this.loading=!1}})}static \u0275fac=function(r){return new(r||e)(v(A),v(E))};static \u0275cmp=x({type:e,selectors:[["app-registration"]],decls:24,vars:12,consts:[[1,"auth-link",3,"routerLink"],[1,"auth-form",3,"ngSubmit","formGroup"],["formControlName","code","type","password","placeholder","Enter invite code"],["class","error",4,"ngIf"],["formControlName","username","type","email","placeholder","Write your email"],["formControlName","password","placeholder","Write your password",3,"type"],["type","button",1,"auth-show-password",3,"click"],["src","assets/svg/unshow.svg","width","25","height","25","alt","Hide password"],["src","assets/svg/show.svg","width","25","height","25","alt","Show password"],["class","info-message",4,"ngIf"],["type","submit",1,"btn",3,"disabled"],[4,"ngIf"],[1,"error"],[1,"info-message"]],template:function(r,t){if(r&1&&(n(0,"span"),m(1,"Already have an account? "),l(),n(2,"a",0),m(3," Log in"),l(),n(4,"form",1),h("ngSubmit",function(){return t.onSubmit()}),n(5,"label"),m(6," Registration Code: "),u(7,"input",2),l(),p(8,U,3,2,"div",3),n(9,"label"),m(10," Email: "),u(11,"input",4),l(),p(12,H,3,2,"div",3),n(13,"label"),m(14," Password: "),u(15,"input",5),n(16,"button",6),h("click",function(){return t.setShow()}),S(17,Z,1,0,"img",7)(18,z,1,0,"img",8),l()(),p(19,Q,4,3,"div",3)(20,X,2,1,"div",9),n(21,"button",10),p(22,Y,2,0,"span",11)(23,ee,2,0,"span",11),l()()),r&2){let i,d,f;a(2),s("routerLink",C(11,G)),a(2),s("formGroup",t.form),a(4),s("ngIf",((i=t.form.get("code"))==null?null:i.invalid)&&((i=t.form.get("code"))==null?null:i.touched)),a(4),s("ngIf",((d=t.form.get("username"))==null?null:d.invalid)&&((d=t.form.get("username"))==null?null:d.touched)),a(3),s("type",t.isShow?"text":"password"),a(2),y(t.isShow?17:18),a(2),s("ngIf",((f=t.form.get("password"))==null?null:f.invalid)&&((f=t.form.get("password"))==null?null:f.touched)),a(),s("ngIf",t.message),a(),s("disabled",t.loading),a(),s("ngIf",!t.loading),a(),s("ngIf",t.loading)}},dependencies:[q,k,T,M,P,F,N,R,I],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}a[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:var(--ligth-color)}input[_ngcontent-%COMP%]{margin-top:8px;color:var(--ligth-color);background:var(--dark-color);width:400px;height:44px;gap:10px;opacity:1;padding:12px 20px;border-radius:2px;border-width:1px}label[_ngcontent-%COMP%]{margin-top:16px;color:var(--ligth-color, white);width:400px}.error[_ngcontent-%COMP%]{color:red}.auth-show-password[_ngcontent-%COMP%]{background:none;color:#5f646d;border:none;position:absolute;transform:translate(-34px,17px);cursor:pointer}@media screen and (max-width: 640px){.app-login[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}form[_ngcontent-%COMP%]{align-items:center}label[_ngcontent-%COMP%], input[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{width:70vw}.auth-show-password[_ngcontent-%COMP%]{transform:translate(70vw,-35px)}}"]})};export{L as a};
