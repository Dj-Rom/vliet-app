import{a as R,c as E,g as w,i as v,l as A,m as F,n as D,o as N,q as W}from"./chunk-3VYYN7AO.js";import{$a as O,Ba as L,Db as S,Fa as m,Fb as M,Gb as I,Ta as p,Ua as a,Va as l,_a as g,bb as b,eb as o,fb as s,gb as f,hb as P,ib as C,jb as y,kb as T,mb as x,nb as k,ob as _,sa as r}from"./chunk-BWAIJMCI.js";var h=class{TIR;SOLO;TRAILER;constructor(){let n={capacityCC:43,Pallets:{CC:{ccValue:1},KK:{ccValue:1.909},FIN:{ccValue:1.65},EURO:{ccValue:1.303},ISO:{ccValue:1.953}},palletSize:{CC:"L135 W57",KK:"",FIN:"L120 W100",EURO:"L120 W80",ISO:"L120 W120"},currentLoaded:{CC:0,KK:0,FIN:0,EURO:0,ISO:0},canLoad:{CC:0,KK:0,FIN:0,EURO:0,ISO:0}};this.TIR=structuredClone(n),this.SOLO=structuredClone(n),this.TRAILER=structuredClone(n),this.TIR.capacityCC=43,this.SOLO.capacityCC=26,this.TRAILER.capacityCC=23,this.loadFromStorage(),this.recalculateAll()}getTruck(n){return this[n]}totalLoad(n){let t=this.getTruck(n),e=Object.entries(t.currentLoaded).reduce((c,[u,K])=>c+t.Pallets[u].ccValue*K,0),i=e/t.capacityCC*100;return{usedCC:e,capacityCC:t.capacityCC,percentFull:Math.min(i,100)}}recalculateCanLoad(n){let t=this.getTruck(n),{usedCC:e}=this.totalLoad(n),i=Math.max(t.capacityCC-e,0);for(let c in t.Pallets)t.canLoad[c]=Math.floor(i/t.Pallets[c].ccValue)}recalculateAll(){["TIR","SOLO","TRAILER"].forEach(n=>this.recalculateCanLoad(n)),this.save()}load(n,t,e){let i=this.getTruck(n);if(!i.Pallets[t])return;let c=i.canLoad[t],u=Math.min(e,c);i.currentLoaded[t]+=u,u<e&&alert(`\u{1F6AB} \u041F\u043E\u043C\u0435\u0441\u0442\u0438\u043B\u043E\u0441\u044C \u0442\u043E\u043B\u044C\u043A\u043E ${u} \u0438\u0437 ${e}`),this.recalculateAll()}unload(n,t,e){let i=this.getTruck(n);i.currentLoaded[t]=Math.max(0,i.currentLoaded[t]-e),this.recalculateAll()}remainingAll(n){return this.getTruck(n).canLoad}resetAll(){["TIR","SOLO","TRAILER"].forEach(n=>{let t=this.getTruck(n);for(let e in t.currentLoaded)t.currentLoaded[e]=0;this.recalculateCanLoad(n)}),this.save()}save(){localStorage.setItem("truckDataCC",JSON.stringify({TIR:this.TIR,SOLO:this.SOLO,TRAILER:this.TRAILER}))}loadFromStorage(){let n=localStorage.getItem("truckDataCC");if(!n)return;let t=JSON.parse(n);for(let e of["TIR","SOLO","TRAILER"]){let i=this.getTruck(e);t[e]&&(i.currentLoaded=t[e].currentLoaded,i.canLoad=t[e].canLoad)}}};var z=()=>["TIR","SOLO","TRAILER"];function j(d,n){if(d&1&&(a(0,"option",12),o(1),l()),d&2){let t=n.$implicit;p("value",t),r(),s(t)}}function U(d,n){if(d&1&&(a(0,"option",12),o(1),l()),d&2){let t=n.$implicit;p("value",t),r(),s(t)}}function B(d,n){if(d&1&&(a(0,"tr")(1,"td"),o(2),l(),a(3,"td"),o(4),l(),a(5,"td"),o(6),l(),a(7,"td"),o(8),l()()),d&2){let t=n.$implicit,e=O();r(2),s(t),r(2),s(e.truckTypes.getTruck(e.selectedType).palletSize[t]),r(2),s(e.truckTypes.getTruck(e.selectedType).currentLoaded[t]),r(),b("color",e.truckTypes.getTruck(e.selectedType).canLoad[t]==0?"red":"#00ff00"),r(),s(e.truckTypes.getTruck(e.selectedType).canLoad[t])}}var V=class d{truckTypes=new h;selectedType="TIR";palletType="CC";count;ngOnInit(){this.updatePalletType()}updatePalletType(){let n=this.truckTypes.getTruck(this.selectedType);this.palletType=Object.keys(n.Pallets)[0]||""}load(){this.truckTypes.load(this.selectedType,this.palletType,this.count)}unload(){this.truckTypes.unload(this.selectedType,this.palletType,this.count)}resetAll(){this.truckTypes.resetAll()}totalLoad(){return this.truckTypes.totalLoad(this.selectedType)}remainingAll(){return this.truckTypes.remainingAll(this.selectedType)}palletKeys(){return Object.keys(this.truckTypes.getTruck(this.selectedType).Pallets)}static \u0275fac=function(t){return new(t||d)};static \u0275cmp=L({type:d,selectors:[["app-load-calculator-page"]],decls:41,vars:17,consts:[[1,"load-calculator-section"],[1,"load-calculator-section-input-block"],[3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModelChange","ngModel"],["type","number","min","1","placeholder","Write count...",3,"ngModelChange","ngModel"],[1,"buttons"],["id","btn-add",1,"btn",3,"click"],["id","btn-del",1,"btn",3,"click"],["id","btn-reset",1,"btn",3,"click"],[1,"pallet-table"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){t&1&&(a(0,"section",0)(1,"div",1)(2,"label"),o(3," Truck Type: "),a(4,"select",2),T("ngModelChange",function(c){return y(e.selectedType,c)||(e.selectedType=c),c}),g("change",function(){return e.updatePalletType()}),m(5,j,2,2,"option",3),l()(),a(6,"label"),o(7," Pallet Type: "),a(8,"select",4),T("ngModelChange",function(c){return y(e.palletType,c)||(e.palletType=c),c}),m(9,U,2,2,"option",3),l()(),a(10,"label"),o(11," Count: "),a(12,"input",5),T("ngModelChange",function(c){return y(e.count,c)||(e.count=c),c}),l()()(),a(13,"div",6)(14,"button",7),g("click",function(){return e.load()}),o(15,"Load"),l(),a(16,"button",8),g("click",function(){return e.unload()}),o(17,"Unload"),l(),a(18,"button",9),g("click",function(){return e.resetAll()}),o(19,"Reset All"),l()(),a(20,"h3"),o(21),l(),a(22,"p"),o(23),k(24,"number"),l(),a(25,"p"),o(26),k(27,"number"),l(),a(28,"table",10)(29,"thead")(30,"tr")(31,"th"),o(32,"Pallet"),l(),a(33,"th"),o(34,"Size"),l(),a(35,"th"),o(36,"Loaded"),l(),a(37,"th"),o(38,"Can Load"),l()()(),a(39,"tbody"),m(40,B,9,6,"tr",11),l()()()),t&2&&(r(4),C("ngModel",e.selectedType),r(),p("ngForOf",x(16,z)),r(3),C("ngModel",e.palletType),r(),p("ngForOf",e.palletKeys()),r(3),C("ngModel",e.count),r(9),f("",e.selectedType," Status"),r(2),P("Used: ",_(24,10,e.totalLoad().usedCC,"1.2-2")," CC / Capacity: ",e.totalLoad().capacityCC," CC"),r(3),f("Fullness: ",_(27,13,e.totalLoad().percentFull,"1.1-1"),"%"),r(14),p("ngForOf",e.palletKeys()))},dependencies:[I,S,W,F,D,R,v,A,E,N,w,M],styles:[".load-calculator-section[_ngcontent-%COMP%]{max-width:1000px;margin:5px;padding:1rem;background:#1c69af;opacity:.98;color:var(--ligth-color);border-radius:10px;border:2px solid white}.load-calculator-section-input-block[_ngcontent-%COMP%]{display:flex;align-items:flex-end;flex-direction:row;align-content:center;flex-wrap:nowrap}label[_ngcontent-%COMP%]{margin:16px;color:var(--ligth-color, white);max-width:400px;font-size:22px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{max-width:400px;height:44px;gap:10px;opacity:1;padding:12px 20px;border-radius:4px;border-width:1px}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin:1rem 0;width:100%}#btn-add[_ngcontent-%COMP%]{color:#e6faff;background:green}#btn-del[_ngcontent-%COMP%]{color:#e6faff;background:#cd5c5c}#btn-reset[_ngcontent-%COMP%]{color:#e6faff;background:#ffffff14}.pallet-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem}.pallet-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .pallet-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:.5rem;text-align:center}@media (max-width: 600px){#btn-add[_ngcontent-%COMP%], #btn-del[_ngcontent-%COMP%], #btn-reset[_ngcontent-%COMP%]{width:80px;text-align:center;font-size:15px;padding:10px}.pallet-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .pallet-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{opacity:1;font-size:.8rem;padding:.3rem;font-weight:900}.load-calculator-section[_ngcontent-%COMP%]{opacity:.88;color:var(--ligth-color);border-radius:10px;display:flex;margin:10px;justify-content:center;flex-direction:column;flex-wrap:wrap;align-items:stretch;align-content:center}.load-calculator-section-input-block[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%}label[_ngcontent-%COMP%]{width:90%}}"]})};export{V as LoadCalculatorPage};
