import{a as B}from"./chunk-H26XXGBI.js";import{a as F}from"./chunk-LD5LC5PG.js";import{h as M}from"./chunk-R63XIQ3C.js";import{a as b,b as a,c as N,d as _,h as y,j as V,k as w,l as C,m as T,n as x,p as A,q as E,s as I}from"./chunk-KBOLL6IX.js";import{g as S}from"./chunk-AWDAIWPN.js";import{Ca as g,Ha as h,Wa as s,Xa as e,Ya as i,Za as p,db as u,e as f,jb as r,sa as m,ya as d}from"./chunk-XTGCJEIM.js";function P(c,o){c&1&&(e(0,"select",10)(1,"option",11),r(2,"VOLVO"),i(),e(3,"option",12),r(4,"DAF"),i(),e(5,"option",13),r(6,"IVECO"),i()())}function D(c,o){c&1&&(e(0,"select",14)(1,"option",15),r(2,"SCHMITZ"),i(),e(3,"option",16),r(4,"OTHER"),i()())}function G(c,o){c&1&&(e(0,"div",17),r(1," Please write number! For example: PZ1R741 "),i())}var O=class c{constructor(o,l,n,t){this.fb=o;this.firebase=l;this.alertService=n;this.vehicleFleetService=t;this.vehicleForm=this.fb.group({vehicleBrand:["volvo",a.required],vehicleType:["truck",a.required],vehicleTrailerBrand:["schmitz",a.required],vehicleNumber:["",[a.required,a.minLength(6)]]})}vehicleForm;curentType=!1;vehicleFleetArray=[];onTypeChange(o){let l=o.target.value;this.curentType=l==="trailer"}onSubmit(){return f(this,null,function*(){if(this.vehicleFleetArray=yield this.vehicleFleetService.getVehicleFleet(),this.vehicleForm.valid){let{vehicleBrand:o,vehicleType:l,vehicleTrailerBrand:n,vehicleNumber:t}=this.vehicleForm.value;if(this.vehicleFleetArray.find(v=>v.vehicle_number==t.toUpperCase())){this.alertService.show("error","Vehicle already exists");return}else this.curentType?yield this.firebase.addVehicleFleet(t.toUpperCase(),l,n):yield this.firebase.addVehicleFleet(t.toUpperCase(),l,o),this.vehicleForm.get("vehicleNumber")?.reset(),this.alertService.show("success","Vehicle added successfully")}else this.alertService.show("error","Form invalid")})}static \u0275fac=function(l){return new(l||c)(d(E),d(M),d(F),d(B))};static \u0275cmp=g({type:c,selectors:[["app-add-new-vehicle"]],decls:17,vars:4,consts:[[1,"add-new-vehicle"],[3,"ngSubmit","formGroup"],["formControlName","vehicleType",3,"change"],["value","trailer"],["value","truck"],["formControlName","vehicleBrand",4,"ngIf"],["formControlName","vehicleTrailerBrand",4,"ngIf"],["type","text","placeholder","Write Number","formControlName","vehicleNumber","minlength","6"],["class","error",4,"ngIf"],["type","submit",1,"btn"],["formControlName","vehicleBrand"],["value","volvo"],["value","daf"],["value","iveco"],["formControlName","vehicleTrailerBrand"],["value","schmitz"],["value","other"],[1,"error"]],template:function(l,n){if(l&1&&(e(0,"section",0)(1,"h1"),r(2,"Add new vehicle"),i(),e(3,"form",1),u("ngSubmit",function(){return n.onSubmit()}),e(4,"select",2),u("change",function(v){return n.onTypeChange(v)}),e(5,"option",3),r(6,"TRAILER"),i(),e(7,"option",4),r(8,"TRUCK"),i()(),p(9,"br"),h(10,P,7,0,"select",5),p(11,"br"),h(12,D,5,0,"select",6),p(13,"input",7),h(14,G,2,0,"div",8),e(15,"button",9),r(16,"SAVE"),i()()()),l&2){let t;m(3),s("formGroup",n.vehicleForm),m(7),s("ngIf",!n.curentType),m(2),s("ngIf",n.curentType),m(2),s("ngIf",((t=n.vehicleForm.get("vehicleNumber"))==null?null:t.touched)&&((t=n.vehicleForm.get("vehicleNumber"))==null?null:t.invalid))}},dependencies:[I,y,T,x,b,C,N,_,A,V,w,S],styles:[".add-new-vehicle[_ngcontent-%COMP%]{width:400px;height:100%;background:#1c69af;padding:10px;display:flex;flex-direction:column;align-content:center;align-items:center;border:2px solid white}.add-new-vehicle[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center;align-items:center;width:90%}select[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{margin-top:30px;width:90%;height:50px;background:var(--ligth-color);margin-bottom:10px}"]})};export{O as AddNewVehicle};
